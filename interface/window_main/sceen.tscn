[gd_scene load_steps=18 format=3 uid="uid://ci7cukdcxsjpq"]

[ext_resource type="Script" uid="uid://kuowvdd77jvp" path="res://interface/window_main/main.gd" id="2_4jocx"]
[ext_resource type="Script" uid="uid://kyelgpl4uka3" path="res://interface/window_main/top/menu/file/menu.gd" id="3_oqinm"]
[ext_resource type="Script" uid="uid://cbfbrqpjlwm2u" path="res://interface/window_main/top/menu/settings/menu.gd" id="4_er4ar"]
[ext_resource type="Script" uid="uid://jho7c42xy578" path="res://interface/window_main/top/score.gd" id="5_8ed5t"]
[ext_resource type="Theme" uid="uid://b3171v3c8d6od" path="res://assets/theme/score.tres" id="5_oqinm"]
[ext_resource type="Script" uid="uid://cyq38bk58pjkg" path="res://interface/window_main/top/preview.gd" id="6_4jocx"]
[ext_resource type="Script" uid="uid://djbimqgro8vku" path="res://interface/window_main/input.gd" id="6_gdit3"]
[ext_resource type="Script" uid="uid://ctvhduil18yyn" path="res://interface/window_main/board/viewport.gd" id="7_6mlf7"]
[ext_resource type="PackedScene" uid="uid://4lbxiud0jbja" path="res://interface/window_main/board/board_sceen.tscn" id="7_g1xfy"]
[ext_resource type="Script" uid="uid://mxta8bkkeq8j" path="res://interface/window_main/preview/subviewport.gd" id="8_5kpx4"]
[ext_resource type="TileSet" uid="uid://c2fjaac6tfuak" path="res://assets/res/tileset.tres" id="9_s8fps"]
[ext_resource type="Script" uid="uid://y87xjiajg2ic" path="res://interface/window_main/preview/grid.gd" id="10_ep230"]
[ext_resource type="PackedScene" uid="uid://cyrecge66ebt6" path="res://interface/window_main/top/menu/file/new_game/window_sceen.tscn" id="13_6mlf7"]
[ext_resource type="PackedScene" uid="uid://5b50t3miwmh6" path="res://interface/window_main/top/menu/file/highscore/window_sceen.tscn" id="14_4jocx"]
[ext_resource type="PackedScene" uid="uid://dwegaf8mwepa2" path="res://interface/window_main/game_over/window_sceen.tscn" id="15_4jocx"]

[sub_resource type="ViewportTexture" id="ViewportTexture_x7vg5"]
viewport_path = NodePath("Preview")

[sub_resource type="ViewportTexture" id="ViewportTexture_27kvy"]
viewport_path = NodePath("Board")

[node name="Root" type="Control" node_paths=PackedStringArray("board_display")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_4jocx")
board_display = NodePath("Board/BoardDisplay")

[node name="UI" type="VBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Top" type="HBoxContainer" parent="UI"]
custom_minimum_size = Vector2(0, 48)
layout_mode = 2

[node name="FileMenuButton" type="MenuButton" parent="UI/Top"]
layout_mode = 2
text = "Datoteka"
flat = false
item_count = 3
popup/item_0/text = "Nova Igra"
popup/item_0/id = 0
popup/item_1/text = "Najbolji rezultati"
popup/item_1/id = 1
popup/item_2/text = "Izađi"
popup/item_2/id = 2
script = ExtResource("3_oqinm")

[node name="SettingsMenuButton" type="MenuButton" parent="UI/Top"]
layout_mode = 2
text = "Podešavanja"
flat = false
item_count = 5
popup/item_0/text = "Zvuk"
popup/item_0/checkable = 1
popup/item_0/id = 0
popup/item_1/text = "Muzika"
popup/item_1/checkable = 1
popup/item_1/id = 1
popup/item_2/text = "Vidi Sledeće"
popup/item_2/checkable = 1
popup/item_2/id = 2
popup/item_3/text = "Prozor Istorije"
popup/item_3/checkable = 1
popup/item_3/id = 3
popup/item_4/text = "Prozor Statistike"
popup/item_4/checkable = 1
popup/item_4/id = 4
script = ExtResource("4_er4ar")

[node name="Score" type="Label" parent="UI/Top"]
layout_mode = 2
size_flags_horizontal = 4
theme = ExtResource("5_oqinm")
text = "0000000"
horizontal_alignment = 1
script = ExtResource("5_8ed5t")

[node name="Preview" type="ScrollContainer" parent="UI/Top"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
draw_focus_border = true
vertical_scroll_mode = 0
script = ExtResource("6_4jocx")

[node name="TextureRect" type="TextureRect" parent="UI/Top/Preview"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
texture = SubResource("ViewportTexture_x7vg5")
expand_mode = 3
stretch_mode = 4

[node name="Board" type="TextureRect" parent="UI"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
texture = SubResource("ViewportTexture_27kvy")
expand_mode = 1
script = ExtResource("6_gdit3")

[node name="Board" type="SubViewport" parent="."]
script = ExtResource("7_6mlf7")

[node name="BoardDisplay" parent="Board" instance=ExtResource("7_g1xfy")]

[node name="Preview" type="SubViewport" parent="."]
disable_3d = true
transparent_bg = true
gui_disable_input = true
size = Vector2i(48, 16)
script = ExtResource("8_5kpx4")

[node name="Grid" type="TileMapLayer" parent="Preview"]
tile_set = ExtResource("9_s8fps")
occlusion_enabled = false
collision_enabled = false
navigation_enabled = false
script = ExtResource("10_ep230")

[node name="NewGame" parent="." instance=ExtResource("13_6mlf7")]
unique_name_in_owner = true

[node name="Highscore" parent="." instance=ExtResource("14_4jocx")]
unique_name_in_owner = true

[node name="Window" parent="." instance=ExtResource("15_4jocx")]

[connection signal="board_clicked" from="UI/Board" to="." method="_on_board_clicked"]
